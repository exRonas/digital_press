# Руководство администратора

## Система "Цифровой банк печати"

Данное руководство предназначено для администраторов системы с полным доступом к управлению.

---

## 1. Роли и права доступа

### Оператор
- ✅ Загрузка выпусков
- ✅ Редактирование документов
- ✅ Удаление документов
- ✅ Просмотр статистики
- ✅ Раздел "Помощь"
- ❌ Управление изданиями
- ❌ Управление пользователями

### Администратор
- ✅ Все права оператора
- ✅ Управление изданиями (создание, редактирование, удаление)
- ✅ Управление пользователями (создание, роли, блокировка, удаление)

---

## 2. Управление изданиями

### Что такое издание?
Издание — это газета или журнал (например, "Казахстанская правда", "Егемен Қазақстан").
Выпуски привязываются к изданиям.

### Создание издания
1. Перейдите в раздел **"Издания"**
2. Нажмите **"Добавить издание"**
3. Введите:
   - **Название на русском** (обязательно)
   - **Название на казахском** (опционально)
4. Нажмите **"Добавить"**

Система автоматически создаст уникальный slug (URL-идентификатор).

### Редактирование издания
1. Нажмите меню (⋮) → **"Редактировать"**
2. Измените название
3. Нажмите **"Сохранить"**

### Удаление издания
⚠️ **Важно:** Издание можно удалить только если к нему не привязаны выпуски!

Если есть выпуски:
1. Сначала удалите все выпуски этого издания
2. Затем удалите издание

Это защита от случайной потери данных.

---

## 3. Управление пользователями

### Создание пользователя
1. Перейдите в раздел **"Пользователи"**
2. Нажмите **"Добавить пользователя"**
3. Заполните:
   - **Имя** — для отображения
   - **Логин** — для входа в систему
   - **Пароль** — минимум 8 символов
   - **Роль** — Оператор или Администратор
4. Нажмите **"Добавить"**

### Редактирование пользователя
1. Нажмите меню (⋮) → **"Редактировать"**
2. Измените данные
3. **Пароль**: оставьте пустым, чтобы не менять
4. Нажмите **"Сохранить"**

### Блокировка пользователя
Вместо удаления можно заблокировать:
1. Откройте редактирование
2. Выключите переключатель **"Активен"**
3. Сохраните

Заблокированный пользователь не сможет войти в систему.

### Удаление пользователя
1. Нажмите меню (⋮) → **"Удалить"**
2. Подтвердите действие

⚠️ **Ограничения:**
- Нельзя удалить самого себя
- Нельзя изменить свою роль

---

## 4. Безопасность

### Первоначальная настройка
После установки системы **обязательно**:
1. Смените пароль администратора по умолчанию
2. Создайте персональные учётные записи для каждого сотрудника
3. Удалите или заблокируйте тестовые аккаунты

### Рекомендации по паролям
- Минимум 12 символов
- Буквы в разных регистрах
- Цифры и спецсимволы
- Уникальный для каждого пользователя

### Мониторинг
Регулярно проверяйте:
- Список активных пользователей
- Статистику загрузок
- Логи сервера (при наличии доступа)

---

## 5. Резервное копирование

### Что нужно бэкапить
1. **База данных** — все метаданные, пользователи, индексы
2. **Файлы PDF** — папка `storage/app/private/pdfs/`
3. **Конфигурация** — файл `.env`

### Автоматический бэкап
Используйте скрипт `scripts/backup.ps1` (Windows) или настройте cron-задачу.

### Рекомендуемая частота
- База данных: ежедневно
- Файлы: еженедельно (инкрементально)
- Полный бэкап: ежемесячно

### Хранение
- Минимум 3 копии
- На разных носителях
- Одна копия — вне офиса (облако или удалённый сервер)

---

## 6. Техническое обслуживание

### Очистка временных файлов
Периодически очищайте:
```bash
php artisan cache:clear
php artisan view:clear
```

### Обновление OCR индекса
Если поиск работает некорректно:
1. Проверьте очередь задач
2. Перезапустите OCR для проблемных документов

### Мониторинг дискового пространства
PDF-файлы занимают много места. Следите за свободным местом на сервере.

---

## 7. Устранение неполадок

### Пользователь не может войти
1. Проверьте, что аккаунт активен
2. Сбросьте пароль
3. Проверьте правильность логина (не email!)

### OCR не работает
1. Проверьте, установлен ли Tesseract
2. Проверьте очередь задач
3. Проверьте логи: `storage/logs/laravel.log`

### Файлы не загружаются
1. Проверьте права на папку `storage/`
2. Проверьте лимиты PHP: `upload_max_filesize`, `post_max_size`
3. Проверьте Nginx: `client_max_body_size`

---

## 8. Контакты разработчиков

При серьёзных технических проблемах обратитесь к команде разработки.

---

*Версия документа: 1.0*  
*Дата обновления: Январь 2026*
